document.addEventListener("DOMContentLoaded",function(){loadScriptOnce?(loadScriptOnce(),console.log(" recaptcha.js loaded")):console.log("load recaptcha.js first");const l=document.querySelector("#footer-form"),a={name:!1,email:!1,text:!1,checkbox:!1};var o=!1;const d=l.querySelector("#submit"),e=l.querySelector("#name"),t=l.querySelector("#email"),r=l.querySelector("#text"),n=l.querySelector("#checkedRequered");function c(e,t,r){if(!e)throw new Error("Input parameter is undefined");e.addEventListener("focus",e=>{t(e)}),e.addEventListener("blur",e=>{r()})}function s(){let e=!0;for(var t in a)if(!1===a[t]){e=!1;break}o=e}function i(e,t){a[e]=t,s(),!0===t&&o&&(d.disabled=!1)}function u(e){e=e.target.parentNode;e&&e.classList.remove("warning")}function y(){var e=l.querySelector("#name"),t=0<e.value.trim().length,e=e.parentNode;!t&&e?(e.classList.add("warning"),i("name",!1)):i("name",!0)}function p(){var e=l.querySelector("#email"),t=e.value,t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),e=e.parentNode;!t&&e?(e.classList.add("warning"),i("email",!1)):i("email",!0)}function m(){var e=l.querySelector("#text"),t=e.value.trim().length,e=e.parentNode;!(10<=t&&t<=1e3)&&e?(e.classList.add("warning"),i("text",!1)):i("text",!0)}function b(){var e=l.querySelector(".ab-check-requred"),t=l.querySelector("#checkedRequered");i("checkbox",t.checked),!t.checked&&e?(e.classList.add("warning"),l.querySelector("#checkbox-text").innerText="In order to submit your message, you need to accept our privacy policy and terms of conditions"):(t=l.querySelector("#checkbox-text"),(e=l.querySelector(".ab-check-requred"))&&(e.classList.remove("warning"),t.innerText="I have read and agree to the Privacy Policy and Terms of Service"),s())}c(e,u,y),c(t,u,p),c(r,u,m),n.addEventListener("change",e=>{b(e.target)}),window.onSubmit=async function(a){const[o,n,c]=getElemValuesByIds(["name","email","text"]),e=l.querySelector("#submit");e.innerHTML="sending",d.disabled=!1,d.disabled=!0;var t,r,s,i=await(async()=>{var e={message:"",errorMessage:null,status:null},t=await fetch("https://api.accbuddy.com/public",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sendMessage:{token:a,name:o,email:n,message:c}})}),r=await t.json();if(t.ok||400!=t.status){if(t.ok){const a=r.result;e.message=a}}else{const a=r.error;e.status=t.status,e.errorMessage=a}return e})();e.innerHTML="send",null!==i.errorMessage?(t=i.errorMessage,r=document.querySelector("#footer-error-plank"),s=r.querySelector(".plank"),r.classList.remove("hidden"),s.innerHTML=t):(r=i.message,document.querySelector("#footer-error-plank").classList.add("hidden"),s=l.querySelector(".ab-form-input-box"),(t=document.createElement("div")).className="ui-response",t.style="height: 141px; min-width: 100% !important; padding: 35px 44.91px;padding-top: 10.15px;padding-right: 10.1px; border: 1px solid var(--ab_violet)",t.innerHTML="<img id='footer-img-close' style='display: block;margin-left: auto;' class='' src='image/close.svg' alt='close_icon'><span style='font-family: var(--ab_primary-font);font-style:normal;font-weight: 800;font-size: 16px;line-height:20px;letter-spacing:-0.5px;color: var(--ab_violet);'><object data='image/checkmark.svg'></object> Thank you</span ><p class='p' style='margin-top: 18.58px; color: var(--ab_violet)'>"+r+"</p>",s.insertBefore(t,s.firstChild),s.querySelector("#footer-img-close").addEventListener("click",()=>{var e,t;e=l.querySelector(".ab-form-input-box"),t=l.querySelector(".ui-response"),e.classList.remove("ab-form-input-box-success"),e.removeChild(t),l.querySelector("#name").parentNode.style.display="block",l.querySelector("#name").value="",l.querySelector("#email").parentNode.style.display="block",l.querySelector("#email").value="",l.querySelector("#text").parentNode.style.display="block",l.querySelector("#text").value="",l.querySelector("#label-checkbox").parentNode.style.visibility="visible",l.querySelector("#submit").parentNode.style.visibility="visible",l.querySelector("#checkedRequered").checked=!1,grecaptcha.reset()}),s.classList.add("ab-form-input-box-success"),l.querySelector("#name").parentNode.style.display="none",l.querySelector("#email").parentNode.style.display="none",l.querySelector("#text").parentNode.style.display="none",l.querySelector("#label-checkbox").parentNode.style.visibility="hidden",l.querySelector("#submit").parentNode.style.visibility="hidden",l.querySelector("#checkedRequered").checked=!1),d.disabled=!1},l.querySelector("#error-plank-close").addEventListener("click",()=>{document.querySelector("#footer-error-plank").classList.add("hidden"),grecaptcha?grecaptcha.reset():console.log("grecaptcha undefined")}),l.querySelector("#submit").onclick=function(e){var t,r;e.preventDefault(),s(),o?grecaptcha.execute():([e,t,r]=[l.querySelector("#name"),l.querySelector("#email"),l.querySelector("#text")],e.addEventListener("input",e=>{y(),a.name&&u(e)}),t.addEventListener("input",e=>{p(),a.email&&u(e)}),r.addEventListener("input",e=>{m(),a.text&&u(e)}),y(),p(),m(),b(),d.disabled=!0)}});